<mvc:View controllerName="todolist.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">

    <Page id="page" title="{i18n>title}">
       
        <content>
            <!-- Center Container -->
            <HBox 
                
                height="100%"
                alignItems="Upper center"
                justifyContent="Center">

                <!-- Card -->
                <VBox
                    width="420px"
                    class="sapUiContentPadding"
                    style="border:1px solid var(--sapNeutralBorderColor);
                           border-radius:14px;">

                    <!-- Card Header -->
                    <HBox justifyContent="SpaceBetween" alignItems="Center">
                        <Title text="To-Do List" level="H4"/>

                        <!-- Theme Toggle -->
                        <Button
                            icon="{= ${/theme} === 'sap_horizon_dark'
                                ? 'sap-icon://light-mode'
                                : 'sap-icon://dark-mode' }"
                            type="Transparent"
                            press="onToggleTheme"/>
                    </HBox>

                    <!-- Add Task -->
                    <HBox class="sapUiSmallMarginTop">
                        <Input
                            width="85%"
                            placeholder="Add a task..."
                            value="{/newTask}" />
                        <Button
                            icon="sap-icon://add"
                            type="Transparent"
                            press="onAdd"/>
                    </HBox>

                    <!-- Task List -->
                    <List
                        items="{/tasks}"
                        showSeparators="None"
                        class="sapUiSmallMarginTop">

                        <items>
                            <CustomListItem>
                                <HBox alignItems="Center" justifyContent="SpaceBetween">

                                    <!-- Checkbox + Content -->
                                    <HBox alignItems="Center" width="100%">
                                        <CheckBox
                                            selected="{completed}"
                                            select="onToggle"/>

                                        <!-- Text -->
                                        <Text
                                            text="{title}"
                                            visible="{= !${isEditing} }"
                                            class="sapUiTinyMarginBegin">
                                            <customData>
                                                <core:CustomData
                                                    key="style"
                                                    writeToDom="true"
                                                    value="{= ${completed}
                                                        ? 'color:#9e9e9e;text-decoration:line-through;'
                                                        : '' }"/>
                                            </customData>
                                        </Text>

                                        <!-- Input -->
                                        <Input
                                            value="{title}"
                                            visible="{isEditing}"
                                            width="100%"
                                            submit="onSaveEdit"
                                            blur="onSaveEdit"
                                            class="sapUiTinyMarginBegin"/>
                                    </HBox>

                                    <!-- Actions -->
                                    <HBox>
                                        <Button
                                            icon="{= ${isEditing}
                                                ? 'sap-icon://save'
                                                : 'sap-icon://edit' }"
                                            type="Transparent"
                                            press="onEdit"/>

                                        <Button
                                            icon="sap-icon://delete"
                                            type="Transparent"
                                            press="onDelete"/>
                                    </HBox>

                                </HBox>
                            </CustomListItem>
                        </items>
                    </List>

                </VBox> 
            </HBox>
        </content>
    </Page>
</mvc:View>